<metal:module-core define-macro="module_core"
   i18n:domain="collective.modules"
   tal:define="checkPermission python: context.restrictedTraverse('portal_membership').checkPermission;
  count python: 0;
  count python: count + 0 if context.text1 is None else count + 1;
  count python: count + 0 if context.text2 is None else count + 1;
  count python: count + 0 if context.text3 is None else count + 1;
  col_lg python: int(12 / count) if count > 0 else 12;
  col_md python: 6 if count > 1 else 12;">

  <section class="teaser-flow stack-ml teaser-flow-posts push-ml module"
     tal:attributes="id python: 'module_' + context.getId()">
    <div class="row">
      <div
        class="col-12 mb-3" tal:condition="python: context.display_title and context.title">
        <h3
          class="module__title strong sans-h6 a-center" tal:condition="python: context.title" tal:content="python: context.title">
          Title</h3>
        <p
          class="module__subtitle" tal:condition="python: context.description" tal:content="python: context.description">
          Description</p>
      </div>
    </div>
    <div class="stop">
      <div class="row">
        <div class="col-sm-12 col-md-6 col-lg-4 mb-4 text-container plain-txt"
           tal:attributes="class python: 'col-sm-12 sans-t2 col-md-' + str(col_md) + ' col-lg-' + str(col_lg) + ' mb-4 text-container'"
           tal:condition="python: context.text1"
           tal:content="structure python:context.text1.output">
        </div>

        <div class="col-sm-12 col-md-6 col-lg-4 mb-4 text-container plain-txt"
           tal:attributes="class python: 'col-sm-12 sans-t2 col-md-' + str(col_md) + ' col-lg-' + str(col_lg) + ' mb-4 text-container'"
           tal:condition="python: context.text2"
           tal:content="structure python:context.text2.output">
        </div>

        <div class="col-sm-12 col-md-6 col-lg-4 mb-4 text-container plain-txt"
           tal:attributes="class python: 'col-sm-12 sans-t2 col-md-' + str(col_md) + ' col-lg-' + str(col_lg) + ' mb-4 text-container'"
           tal:condition="python: context.text3"
           tal:content="structure python:context.text3.output">
        </div>
      </div>

      <div class="row">
        <div
          class="col-12 edit-module" tal:condition="python: checkPermission('Modify portal content', context)">
          <a class="btn btn-primary btn-sm  float-right"
             tal:condition="python: checkPermission('Modify portal content', context)"
             tal:attributes="href python: context.absolute_url() + '/edit'">
            Edit Module
          </a>
        </div>
      </div>
    </div>
  </section>
</metal:module-core>
